{% extends "search/base.html" %}
{% load pagination_tags highlight %}
{% comment %}
{% block breadcrumb %}
{{ block.super }}
{% if query %}
<li>&raquo;</li>
<li><a href="{{ request.get_full_path }}">{{ query }}</a></li>
{% endif %}
{% endblock %}
{% endcomment %}

{% block pagetitle %}Search | {{ block.super }}{% endblock %}
{% block title %}Search{% endblock %}

{% block search_form %}

    <form class="well well-small form-search" method="GET" action="{{ request.path }}">
        <input class="input-medium search-query" type="search" name="q" value="{{ query|default_if_none:"" }}">
        <button class="btn" type="submit">Search</button>
    </form>

{% endblock search_form %}

{% comment %}
{% block refine_search %}
{% if facets.fields.language %}
<h2>{% trans "Refine by" %}</h2>
<h3>{% trans "Language" %}</h3>
<ul>
    {% for language in facets.fields.language %}
    <li><a href="{{ request.get_full_path }}&amp;selected_facets=language_exact:{{ language.0 }}">{{ language.0 }}</a> ({{ language.1 }})</li>
    {% endfor %}
</ul>
{% else %}
{% endif %}
{% endblock refine_search %}
{% endcomment %}

{% block search_results %}
{% if query %}
<h1>Results</h1>
<section class="search-results">
<ul class="unstyled">
    {% for result in page.object_list %}
    <li class="well well-small">
        <span class="title"><a href="{{ result.url }}">{{ result.title }}</a></span>
        <span class="label">
            {% if result.content_type == "cms.title" %}
            Page
            {% else %}
            {% if result.content_type == "cmsplugin_blog.entrytitle" %}
            Blog entry
            {% else %}
            {{ result.verbose_name }}
            {% endif %}
            {% endif %}
        </span>
        {% if result.text %}<summary>{% highlight result.text with query %}</summary>{% endif %}
    </li>
    {% empty %}
    <li class="well well-small">No results were found for your search.  Please ensure that your spelling is correct and that your search is general enough.</li>
    {% endfor %}
</ul>
{% with page as page_obj %}
{% paginate %}
{% endwith %}
</section>
{% else %}
{# Show some example queries to run, maybe query syntax, something else? #}
{% endif %}
{% endblock search_results %}
