{% extends "search/base.html" %}
{% load pagination_tags highlight i18n %}

{% comment %}
{% block breadcrumb %}
{{ block.super }}
{% if query %}
<li>&raquo;</li>
<li><a href="{{ request.get_full_path }}">{{ query }}</a></li>
{% endif %}
{% endblock %}
{% endcomment %}

{% block search_form %}

<div class="roundbox">
	<div class="roundbox-inner">
		<form class="search-form" method="get" action=".">
			<ul class="search-fields">
				{{ form.as_ul }}
				<li><button>{% trans "Search" %}</button></li>
			</ul>
		</form>
	</div>
</div>

{% endblock search_form %}

{% block refine_search %}
{% if facets.fields.language %}
<h2>{% trans "Refine by" %}</h2>
<h3>{% trans "Language" %}</h3>
<ul>
	{% for language in facets.fields.language %}
	<li><a href="{{ request.get_full_path }}&amp;selected_facets=language_exact:{{ language.0 }}">{{ language.0 }}</a> ({{ language.1 }})</li>
	{% endfor %}
</ul>
{% else %}
{% endif %}
{% endblock refine_search %}

{% block search_results %}
{% if query %}
<!--<h2>{% trans "Results" %}</h2>-->
<div class="horizontal-gray-bar">
	<div class="horizontal-gray-bar-inner">
		{% trans "Results" %}
	</div>
</div>
<ul class="search-results">
	{% for result in page.object_list %}
	<li>
	<div class="roundbox">
		<div class="roundbox-inner">
			<div class="clearfix">
				<div class="result-title"><a href="{{ result.get_absolute_url }}">{{ result.title }}</a></div>
				<div class="result-type">
					{% if result.content_type == "cms.title" %}
					{% trans "Page" %}
					{% else %}
					{% if result.content_type == "cmsplugin_blog.entrytitle" %}
					{% trans "Blog entry" %}	
					{% else %}
					{{ result.verbose_name }} 
					{% endif %}
					{% endif %}
				</div>
			</div>
			<div>{% highlight result.text with query %}</div>
		</div>
	</div>
	</li>
	{% empty %}
	<li>
	<div class="roundbox">
		<div class="roundbox-inner">
			<p>{% trans "No results were found for your search." %}</p>
			<p>Please ensure that your spelling is correct and that your search is general enough.  If you are using quotes around a phrase to narrow your search, you may wish to remove them in order to broaden the scope of your query.</p>
		</div>
	</div>
	</li>
	{% endfor %}
</ul>
{% with page as page_obj %}
{% paginate %}
{% endwith %}
{% else %}
{# Show some example queries to run, maybe query syntax, something else? #}
{% endif %}
{% endblock search_results %}
