{% extends "zinnia/_entry_detail_base.html" %}
{% load comments i18n markdown_deux_tags %}

{% block entry-title %}
	{% if continue_reading %}
		{{ block.super }}
	{% else %}
		<div class="lead">
			{% if object.excerpt %}{{ object.excerpt|markdown }}{% endif %}
		</div>
	{% endif %}
{% endblock %}

{% block entry-info %}
<p class="entry-info">
  {% with authors=object.authors.all %}
  {% if authors|length %}
  {% trans "Written by" %}
  {% for author in authors %}
  <span class="vcard author">
    <a href="{{ author.get_absolute_url }}" class="fn url{% if not author.get_full_name %} nickname{% endif %}" rel="author"
       title="{% blocktrans %}Show all {{ author }}'s entries{% endblocktrans %}">{{ author }}</a></span>{% if not forloop.last %}, {% endif %}
  {% endfor %}
  {% trans "on" %}
  {% else %}
  {% trans "Written on" %}
  {% endif %}
  {% endwith %}
  <abbr class="published" title="{{ object.creation_date|date:"c" }}">{{ object.creation_date|date:"DATE_FORMAT" }}</abbr>
  {% with categories=object.categories.all %}
  {% if categories|length %}
  {% trans "in" %}
  {% for category in categories %}
  <a href="{{ category.get_absolute_url }}"
     title="{% blocktrans %}Show all entries in {{ category }}{% endblocktrans %}"
     rel="tag category">{{ category }}</a>{% if not forloop.last %}, {% endif %}{% endfor %}{% endif %}.{% endwith %}
</p>
{% endblock %}
{% block entry-last-update %}
<p class="entry-last-update">
  {% trans "Last update on" %} <abbr class="updated" title="{{ object.last_update|date:"c" }}">{{ object.last_update|date:"DATE_FORMAT" }}</abbr>.
</p>
{% endblock %}

{% block entry-body %}
  <div class="entry-body">
    {% block entry-image %}
    {% if object.image %}
    <div class="entry-image">
      <p>
        {% if continue_reading %}
        <a href="{{ object.get_absolute_url }}" title="{{ object.title }}" rel="bookmark">
          {% endif %}
          <img src="{{ object.image.url }}" alt="{{ object.title }}" class="left" />
          {% if continue_reading %}
        </a>
        {% endif %}
      </p>
    </div>
    {% endif %}
    {% endblock %}
    {% block entry-content %}
		{% if continue_reading %}
			{{ object.excerpt|markdown }}
		{% else %}
			<div class="entry-content">
				{{ object.content|markdown }}
		  	</div>
		{% endif %}
    {% endblock %}
  </div>
{% endblock %}

{% block entry-footer %}
  <div class="entry-footer">
    {% block entry-tags %}
    <p class="entry-tags">
      <strong>{% trans "Tags" %}</strong> :
      {% for tag in object.tags_list %}
      <a href="{% url 'zinnia_tag_detail' tag %}"
         title="{% blocktrans %}Show all entries tagged by {{ tag }}{% endblocktrans %}"
         rel="tag">{{ tag }}</a>
      {% empty %}
      <span>{% trans "No tags" %}</span>
      {% endfor %}
    </p>
    {% endblock %}
    {% block entry-shorturl %}
    <p class="entry-shorturl">
      <strong>{% trans "Short url" %}</strong> :
      <a href="{{ object.short_url }}"
         title="{% blocktrans with object=object.title %}Short URL to {{ object }}{% endblocktrans %}"
         rel="shortlink">
        {{ object.short_url }}
      </a>
    </p>
    {% endblock %}
  </div>
{% endblock %}

{% block entry-comments %}
	{# This space intentionally left blank #}
{% endblock %}
	
{% block continue-reading %}
	{# This space intentionally left blank #}
{% endblock %}
